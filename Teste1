-- Shoot Murderer PRO - Rayfield Library Edition
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local RS = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local localPlayer = Players.LocalPlayer
local Mouse = localPlayer:GetMouse()
local Workspace = game:GetService("Workspace")
local Camera = Workspace.CurrentCamera

-- ConfiguraÃ§Ãµes
local Settings = {
    Hotkey = Enum.KeyCode.Q,
    ShootOffset = 2.8,
    
    -- BotÃ£o Flutuante MÃ³vel
    FloatingButton = {
        Enabled = true,
        Position = UDim2.new(0.85, 0, 0.5, 0),
        Size = UDim2.new(0, 140, 0, 60),
        Locked = false,
        ShowAimLine = true,
        AutoShoot = false,
        AutoShootInterval = 0.2
    },
    
    -- Gun Silent
    GunSilent = {
        Enabled = false,
        ForceHit = true,
        Target = "Murderer",
        Prediction = true,
        PingCompensation = true
    },
    
    -- Mouse Silent
    MouseSilent = {
        Enabled = false,
        FOV = 30,
        ShowFOV = true,
        Trigger = Enum.UserInputType.MouseButton1,
        AutoShoot = true
    },
    
    -- ESP APENAS Murder/Sheriff
    ESP = {
        Enabled = true,
        MaxDistance = 1000,
        ShowDistance = true,
        ShowHealth = true,
        
        Colors = {
            Murderer = Color3.fromRGB(255, 50, 50),
            Sheriff = Color3.fromRGB(50, 150, 255),
            Gun = Color3.fromRGB(255, 255, 0)
        }
    },
    
    -- Auto Grab
    AutoGrab = true,
    GrabDistance = 30
}

-- Cache
local ESPCache = {}
local MurdererCache = nil
local SheriffCache = nil
local FOVCircle = nil
local GunDropCache = nil
local FloatingButton = nil
local ButtonDragging = false
local DragStart = nil
local ButtonStartPos = nil
local AimLine = nil

-- FunÃ§Ãµes auxiliares
local function getMurderer()
    if MurdererCache and MurdererCache.Parent then
        if MurdererCache.Backpack:FindFirstChild("Knife") or 
           (MurdererCache.Character and MurdererCache.Character:FindFirstChild("Knife")) then
            return MurdererCache
        end
    end
    
    MurdererCache = nil
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= localPlayer then
            if player.Backpack:FindFirstChild("Knife") or 
               (player.Character and player.Character:FindFirstChild("Knife")) then
                MurdererCache = player
                return player
            end
        end
    end
    return nil
end

local function getSheriff()
    if SheriffCache and SheriffCache.Parent then
        if SheriffCache.Backpack:FindFirstChild("Gun") or
           (SheriffCache.Character and SheriffCache.Character:FindFirstChild("Gun")) then
            return SheriffCache
        end
    end
    
    SheriffCache = nil
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= localPlayer then
            if player.Backpack:FindFirstChild("Gun") or
               (player.Character and player.Character:FindFirstChild("Gun")) then
                SheriffCache = player
                return player
            end
        end
    end
    return nil
end

-- PrediÃ§Ã£o Melhorada
local function getPredictedPos(target)
    if not target or not target.Character then return nil end
    
    local hrp = target.Character:FindFirstChild("HumanoidRootPart")
    local hum = target.Character:FindFirstChild("Humanoid")
    
    if not hrp or not hum then return nil end
    
    local vel = hrp.AssemblyLinearVelocity
    local moveDir = hum.MoveDirection
    local ping = localPlayer:GetNetworkPing() * 1000
    
    local predFactor = Settings.ShootOffset / 15
    if Settings.GunSilent.PingCompensation then
        predFactor = predFactor * (1 + (ping / 100))
    end
    
    local predPos = hrp.Position + (vel * predFactor) + (moveDir * Settings.ShootOffset)
    
    return predPos
end

-- FunÃ§Ã£o de tiro principal
local function shootAtMurderer()
    local sheriff = getSheriff()
    if sheriff == localPlayer then
        local target = getMurderer()
        if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
            local gun = localPlayer.Character and localPlayer.Character:FindFirstChild("Gun") or 
                      localPlayer.Backpack:FindFirstChild("Gun")
            
            if gun then
                if not localPlayer.Character:FindFirstChild("Gun") then
                    localPlayer.Character.Humanoid:EquipTool(gun)
                    task.wait(0.1)
                end
                
                local predPos = getPredictedPos(target)
                if predPos then
                    local args = {
                        [1] = CFrame.new(localPlayer.Character.RightHand.Position),
                        [2] = CFrame.new(predPos)
                    }
                    
                    pcall(function()
                        localPlayer.Character.Gun.Shoot:FireServer(unpack(args))
                    end)
                    
                    return true
                end
            end
        end
    end
    return false
end

-- CRIAR BOTÃƒO FLUTUANTE MÃ“VEL
local function createFloatingButton()
    if FloatingButton then
        pcall(function()
            FloatingButton.Parent:Destroy()
        end)
    end
    
    -- ScreenGui
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "ShootMurdererButton"
    screenGui.Parent = game:GetService("CoreGui")
    screenGui.ResetOnSpawn = false
    screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    
    -- BotÃ£o principal - Frame clicÃ¡vel
    local button = Instance.new("Frame")
    button.Name = "ShootButton"
    button.Size = Settings.FloatingButton.Size
    button.Position = Settings.FloatingButton.Position
    button.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
    button.BackgroundTransparency = 0.1
    button.BorderSizePixel = 0
    button.Active = true
    button.Selectable = true
    button.Parent = screenGui
    
    -- Sombra
    local shadow = Instance.new("ImageLabel")
    shadow.Name = "Shadow"
    shadow.Size = UDim2.new(1, 20, 1, 20)
    shadow.Position = UDim2.new(0, -10, 0, -10)
    shadow.BackgroundTransparency = 1
    shadow.Image = "rbxasset://textures/ui/GuiImagePlaceholder.png"
    shadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
    shadow.ImageTransparency = 0.7
    shadow.ScaleType = Enum.ScaleType.Slice
    shadow.SliceCenter = Rect.new(10, 10, 118, 118)
    shadow.Parent = button
    
    -- Gradiente
    local gradient = Instance.new("UIGradient")
    gradient.Color = ColorSequence.new({
        ColorSequenceKeypoint.new(0, Color3.fromRGB(45, 45, 50)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(25, 25, 30))
    })
    gradient.Rotation = 90
    gradient.Parent = button
    
    -- Arredondamento
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 12)
    corner.Parent = button
    
    -- Borda animada
    local border = Instance.new("Frame")
    border.Name = "Border"
    border.Size = UDim2.new(1, 0, 0, 3)
    border.Position = UDim2.new(0, 0, 0, 0)
    border.BackgroundColor3 = Color3.fromRGB(255, 70, 70)
    border.BorderSizePixel = 0
    border.Parent = button
    
    local borderCorner = Instance.new("UICorner")
    borderCorner.CornerRadius = UDim.new(0, 12)
    borderCorner.Parent = border
    
    -- Ãcone de arma
    local icon = Instance.new("TextLabel")
    icon.Name = "Icon"
    icon.Size = UDim2.new(0, 30, 0, 30)
    icon.Position = UDim2.new(0, 15, 0.5, -15)
    icon.BackgroundTransparency = 1
    icon.Text = "ðŸ”«"
    icon.TextColor3 = Color3.fromRGB(255, 255, 255)
    icon.TextSize = 22
    icon.Font = Enum.Font.GothamBold
    icon.Parent = button
    
    -- Texto principal
    local textLabel = Instance.new("TextLabel")
    textLabel.Name = "Text"
    textLabel.Size = UDim2.new(1, -80, 1, 0)
    textLabel.Position = UDim2.new(0, 55, 0, 0)
    textLabel.BackgroundTransparency = 1
    textLabel.Text = "ATIRAR"
    textLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    textLabel.Font = Enum.Font.GothamBold
    textLabel.TextSize = 16
    textLabel.TextXAlignment = Enum.TextXAlignment.Left
    textLabel.Parent = button
    
    -- Status (Sheriff/Murder)
    local statusLabel = Instance.new("TextLabel")
    statusLabel.Name = "Status"
    statusLabel.Size = UDim2.new(1, -55, 0, 16)
    statusLabel.Position = UDim2.new(0, 55, 0, 28)
    statusLabel.BackgroundTransparency = 1
    statusLabel.Text = "Aguardando..."
    statusLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    statusLabel.Font = Enum.Font.Gotham
    statusLabel.TextSize = 11
    statusLabel.TextXAlignment = Enum.TextXAlignment.Left
    statusLabel.Parent = button
    
    -- Indicador de Sheriff
    local sheriffIndicator = Instance.new("Frame")
    sheriffIndicator.Name = "SheriffIndicator"
    sheriffIndicator.Size = UDim2.new(0, 10, 0, 10)
    sheriffIndicator.Position = UDim2.new(1, -45, 0.5, -5)
    sheriffIndicator.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
    sheriffIndicator.BackgroundTransparency = 0.3
    sheriffIndicator.Parent = button
    
    local indicatorCorner = Instance.new("UICorner")
    indicatorCorner.CornerRadius = UDim.new(1, 0)
    indicatorCorner.Parent = sheriffIndicator
    
    -- BOTÃƒO DE TRAVAR (LOCK)
    local lockButton = Instance.new("TextButton")
    lockButton.Name = "LockButton"
    lockButton.Size = UDim2.new(0, 28, 0, 28)
    lockButton.Position = UDim2.new(1, -35, 0, 8)
    lockButton.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
    lockButton.BackgroundTransparency = 0.2
    lockButton.Text = Settings.FloatingButton.Locked and "ðŸ”’" or "ðŸ”“"
    lockButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    lockButton.TextSize = 16
    lockButton.Font = Enum.Font.Gotham
    lockButton.BorderSizePixel = 0
    lockButton.Parent = button
    
    local lockCorner = Instance.new("UICorner")
    lockCorner.CornerRadius = UDim.new(0, 6)
    lockCorner.Parent = lockButton
    
    -- Ãrea de arrastar (todo o botÃ£o exceto o lock)
    local dragArea = Instance.new("Frame")
    dragArea.Name = "DragArea"
    dragArea.Size = UDim2.new(1, -40, 1, 0)
    dragArea.Position = UDim2.new(0, 0, 0, 0)
    dragArea.BackgroundTransparency = 1
    dragArea.Parent = button
    
    -- EVENTOS DE ARRASTAR (MÃ“VEL)
    dragArea.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            if not Settings.FloatingButton.Locked then
                ButtonDragging = true
                DragStart = input.Position
                ButtonStartPos = button.Position
                
                -- Feedback visual
                button.BackgroundTransparency = 0.2
                gradient.Rotation = 45
                border.BackgroundColor3 = Color3.fromRGB(100, 200, 255)
            end
        end
    end)
    
    dragArea.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            ButtonDragging = false
            DragStart = nil
            ButtonStartPos = nil
            
            -- Reset visual
            button.BackgroundTransparency = 0.1
            gradient.Rotation = 90
            border.BackgroundColor3 = Settings.FloatingButton.Locked and 
                Color3.fromRGB(100, 100, 100) or Color3.fromRGB(255, 70, 70)
            
            -- Salvar posiÃ§Ã£o
            if button.Position then
                Settings.FloatingButton.Position = button.Position
            end
        end
    end)
    
    -- Atualizar posiÃ§Ã£o durante arrasto
    RS.RenderStepped:Connect(function()
        if ButtonDragging and DragStart and ButtonStartPos and not Settings.FloatingButton.Locked then
            local mousePos = UIS:GetMouseLocation()
            local delta = mousePos - DragStart
            
            local newPos = UDim2.new(
                ButtonStartPos.X.Scale,
                ButtonStartPos.X.Offset + delta.X,
                ButtonStartPos.Y.Scale,
                ButtonStartPos.Y.Offset + delta.Y
            )
            
            -- Limites da tela
            local absX = math.clamp(newPos.X.Offset, 10, Camera.ViewportSize.X - button.AbsoluteSize.X - 10)
            local absY = math.clamp(newPos.Y.Offset, 10, Camera.ViewportSize.Y - button.AbsoluteSize.Y - 10)
            
            button.Position = UDim2.new(0, absX, 0, absY)
        end
    end)
    
    -- FUNÃ‡ÃƒO DE TRAVAR/DESTRAVAR
    lockButton.MouseButton1Click:Connect(function()
        Settings.FloatingButton.Locked = not Settings.FloatingButton.Locked
        lockButton.Text = Settings.FloatingButton.Locked and "ðŸ”’" or "ðŸ”“"
        
        -- Feedback visual
        if Settings.FloatingButton.Locked then
            lockButton.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
            border.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
            button.BackgroundColor3 = Color3.fromRGB(35, 35, 40)
        else
            lockButton.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
            border.BackgroundColor3 = Color3.fromRGB(255, 70, 70)
            button.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
        end
        
        Rayfield:Notify({
            Title = "BotÃ£o",
            Content = Settings.FloatingButton.Locked and "ðŸ”’ BotÃ£o travado na posiÃ§Ã£o!" or "ðŸ”“ BotÃ£o livre para mover!",
            Duration = 1.5,
            Image = 4483345998
        })
    end)
    
    -- BOTÃƒO DE ATIRAR (FUNÃ‡ÃƒO PRINCIPAL)
    local shootButton = Instance.new("TextButton")
    shootButton.Name = "ShootButtonClick"
    shootButton.Size = UDim2.new(1, -40, 1, 0)
    shootButton.Position = UDim2.new(0, 0, 0, 0)
    shootButton.BackgroundTransparency = 1
    shootButton.Text = ""
    shootButton.Parent = button
    
    shootButton.MouseButton1Click:Connect(function()
        local success = shootAtMurderer()
        
        -- Feedback visual
        if success then
            button.BackgroundColor3 = Color3.fromRGB(255, 100, 100)
            border.BackgroundColor3 = Color3.fromRGB(255, 200, 200)
            textLabel.Text = "ATIRANDO!"
            
            task.wait(0.1)
            button.BackgroundColor3 = Settings.FloatingButton.Locked and 
                Color3.fromRGB(35, 35, 40) or Color3.fromRGB(25, 25, 30)
            border.BackgroundColor3 = Settings.FloatingButton.Locked and 
                Color3.fromRGB(100, 100, 100) or Color3.fromRGB(255, 70, 70)
            textLabel.Text = "ATIRAR"
        end
    end)
    
    -- Linha de mira
    if Settings.FloatingButton.ShowAimLine then
        AimLine = Drawing.new("Line")
        AimLine.Thickness = 2
        AimLine.Color = Color3.fromRGB(255, 100, 100)
        AimLine.Transparency = 0.5
        AimLine.Visible = false
    end
    
    FloatingButton = button
    
    -- Loop de atualizaÃ§Ã£o do botÃ£o
    RS.Heartbeat:Connect(function()
        if not FloatingButton then return end
        
        local sheriff = getSheriff()
        local murderer = getMurderer()
        local isSheriff = sheriff == localPlayer
        
        -- Atualizar status
        if isSheriff then
            sheriffIndicator.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
            statusLabel.Text = "ðŸ”« VocÃª Ã© o Sheriff"
            
            if murderer then
                local dist = murderer.Character and murderer.Character:FindFirstChild("HumanoidRootPart") and 
                    (murderer.Character.HumanoidRootPart.Position - localPlayer.Character.HumanoidRootPart.Position).Magnitude or 0
                statusLabel.Text = string.format("ðŸŽ¯ Murder: %.0fm", dist)
                sheriffIndicator.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
            end
        else
            sheriffIndicator.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
            if sheriff then
                statusLabel.Text = "ðŸ‘¤ Sheriff: " .. sheriff.Name
            else
                statusLabel.Text = "âŒ Sem sheriff"
            end
        end
        
        -- Linha de mira
        if Settings.FloatingButton.ShowAimLine and AimLine and isSheriff and murderer and murderer.Character and murderer.Character:FindFirstChild("HumanoidRootPart") then
            local buttonPos = Vector2.new(
                button.AbsolutePosition.X + button.AbsoluteSize.X/2,
                button.AbsolutePosition.Y + button.AbsoluteSize.Y/2
            )
            
            local targetPos = Camera:WorldToViewportPoint(murderer.Character.HumanoidRootPart.Position)
            if targetPos.Z > 0 then
                AimLine.From = buttonPos
                AimLine.To = Vector2.new(targetPos.X, targetPos.Y)
                AimLine.Visible = true
                AimLine.Color = Color3.fromRGB(255, 100, 100)
            else
                AimLine.Visible = false
            end
        elseif AimLine then
            AimLine.Visible = false
        end
    end)
    
    return button
end

-- GUN SILENT MELHORADO
local function setupGunSilent()
    if not Settings.GunSilent.Enabled then return end
    
    local mt = getrawmetatable(game)
    local oldNamecall = mt.__namecall
    
    setreadonly(mt, false)
    mt.__namecall = newcclosure(function(self, ...)
        local method = getnamecallmethod()
        local args = {...}
        
        if method == "FireServer" and self.Name == "Shoot" then
            local target = nil
            
            if Settings.GunSilent.Target == "Murderer" then
                target = getMurderer()
            end
            
            if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
                local hitPos
                
                if Settings.GunSilent.ForceHit then
                    hitPos = target.Character.HumanoidRootPart.Position
                else
                    hitPos = getPredictedPos(target)
                end
                
                if hitPos and args[2] and typeof(args[2]) == "CFrame" then
                    args[2] = CFrame.new(hitPos)
                    return oldNamecall(self, unpack(args))
                end
            end
        end
        
        return oldNamecall(self, ...)
    end)
    setreadonly(mt, true)
end

-- MOUSE SILENT MELHORADO
local function setupMouseSilent()
    if not Settings.MouseSilent.Enabled then return end
    
    if Settings.MouseSilent.ShowFOV and not FOVCircle then
        FOVCircle = Drawing.new("Circle")
        FOVCircle.Transparency = 0.7
        FOVCircle.Color = Color3.fromRGB(255, 255, 255)
        FOVCircle.Thickness = 1.5
        FOVCircle.Radius = Settings.MouseSilent.FOV * 2
        FOVCircle.Filled = false
        FOVCircle.Visible = true
        FOVCircle.NumSides = 60
    end
    
    RS.RenderStepped:Connect(function()
        if Settings.MouseSilent.ShowFOV and FOVCircle then
            FOVCircle.Position = Vector2.new(Mouse.X, Mouse.Y)
            FOVCircle.Radius = Settings.MouseSilent.FOV * 2
            FOVCircle.Visible = Settings.MouseSilent.Enabled
        end
    end)
    
    UIS.InputBegan:Connect(function(input)
        if input.UserInputType == Settings.MouseSilent.Trigger then
            local mousePos = Vector2.new(Mouse.X, Mouse.Y)
            local bestTarget = nil
            local bestDist = Settings.MouseSilent.FOV * 2
            
            for _, player in pairs(Players:GetPlayers()) do
                if player ~= localPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                    local pos = Camera:WorldToViewportPoint(player.Character.HumanoidRootPart.Position)
                    if pos.Z > 0 then
                        local screenPos = Vector2.new(pos.X, pos.Y)
                        local dist = (screenPos - mousePos).Magnitude
                        
                        if dist <= bestDist then
                            bestDist = dist
                            bestTarget = player
                        end
                    end
                end
            end
            
            if bestTarget and localPlayer.Character and localPlayer.Character:FindFirstChild("Gun") then
                local predPos = getPredictedPos(bestTarget)
                if predPos then
                    local args = {
                        [1] = CFrame.new(localPlayer.Character.RightHand.Position),
                        [2] = CFrame.new(predPos)
                    }
                    localPlayer.Character.Gun.Shoot:FireServer(unpack(args))
                end
            end
        end
    end)
end

-- ESP APENAS MURDER E SHERIFF
local function createESP()
    if not Settings.ESP.Enabled then return end
    
    -- Limpar ESP antigo
    for _, esp in pairs(ESPCache) do
        if esp then
            pcall(function()
                if esp.Billboard then esp.Billboard:Destroy() end
                if esp.Highlight then esp.Highlight:Destroy() end
                if esp.Connection then esp.Connection:Disconnect() end
            end)
        end
    end
    ESPCache = {}
    
    -- ESP MURDER
    local murderer = getMurderer()
    if murderer and murderer.Character and murderer.Character:FindFirstChild("HumanoidRootPart") then
        local billboard = Instance.new("BillboardGui")
        billboard.Name = "MurdererESP"
        billboard.Size = UDim2.new(0, 200, 0, 80)
        billboard.AlwaysOnTop = true
        billboard.MaxDistance = Settings.ESP.MaxDistance
        billboard.StudsOffset = Vector3.new(0, 3.5, 0)
        billboard.Adornee = murderer.Character.HumanoidRootPart
        billboard.Parent = game:GetService("CoreGui")
        
        -- Fundo
        local bg = Instance.new("Frame")
        bg.Size = UDim2.new(1, 0, 1, 0)
        bg.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
        bg.BackgroundTransparency = 0.2
        bg.BorderSizePixel = 0
        bg.Parent = billboard
        
        local bgCorner = Instance.new("UICorner")
        bgCorner.CornerRadius = UDim.new(0, 6)
        bgCorner.Parent = bg
        
        -- Linha vermelha superior
        local topLine = Instance.new("Frame")
        topLine.Size = UDim2.new(1, 0, 0, 3)
        topLine.BackgroundColor3 = Settings.ESP.Colors.Murderer
        topLine.BorderSizePixel = 0
        topLine.Parent = billboard
        
        -- Ãcone
        local icon = Instance.new("TextLabel")
        icon.Text = "ðŸ”ª"
        icon.Size = UDim2.new(0, 30, 0, 30)
        icon.Position = UDim2.new(0, 5, 0, 8)
        icon.BackgroundTransparency = 1
        icon.TextColor3 = Settings.ESP.Colors.Murderer
        icon.Font = Enum.Font.GothamBold
        icon.TextSize = 22
        icon.Parent = billboard
        
        -- Nome
        local nameLabel = Instance.new("TextLabel")
        nameLabel.Size = UDim2.new(1, -40, 0, 20)
        nameLabel.Position = UDim2.new(0, 40, 0, 8)
        nameLabel.BackgroundTransparency = 1
        nameLabel.Text = "MURDERER"
        nameLabel.TextColor3 = Settings.ESP.Colors.Murderer
        nameLabel.Font = Enum.Font.GothamBold
        nameLabel.TextSize = 16
        nameLabel.TextXAlignment = Enum.TextXAlignment.Left
        nameLabel.Parent = billboard
        
        -- Nome do jogador
        local playerName = Instance.new("TextLabel")
        playerName.Size = UDim2.new(1, -40, 0, 18)
        playerName.Position = UDim2.new(0, 40, 0, 28)
        playerName.BackgroundTransparency = 1
        playerName.Text = murderer.Name
        playerName.TextColor3 = Color3.fromRGB(255, 255, 255)
        playerName.Font = Enum.Font.Gotham
        playerName.TextSize = 14
        playerName.TextXAlignment = Enum.TextXAlignment.Left
        playerName.Parent = billboard
        
        -- Info
        local infoLabel = Instance.new("TextLabel")
        infoLabel.Size = UDim2.new(1, -10, 0, 18)
        infoLabel.Position = UDim2.new(0, 5, 0, 52)
        infoLabel.BackgroundTransparency = 1
        infoLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
        infoLabel.Font = Enum.Font.Gotham
        infoLabel.TextSize = 12
        infoLabel.TextXAlignment = Enum.TextXAlignment.Left
        infoLabel.Parent = billboard
        
        -- Highlight
        local highlight = Instance.new("Highlight")
        highlight.Name = "MurdererHighlight"
        highlight.Adornee = murderer.Character
        highlight.FillColor = Settings.ESP.Colors.Murderer
        highlight.FillTransparency = 0.7
        highlight.OutlineColor = Settings.ESP.Colors.Murderer
        highlight.OutlineTransparency = 0.3
        highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
        highlight.Parent = game:GetService("CoreGui")
        
        -- AtualizaÃ§Ã£o
        local updateConn = RS.RenderStepped:Connect(function()
            if not murderer.Character or not murderer.Character:FindFirstChild("HumanoidRootPart") or
               not localPlayer.Character or not localPlayer.Character:FindFirstChild("HumanoidRootPart") then
                return
            end
            
            local dist = (murderer.Character.HumanoidRootPart.Position - localPlayer.Character.HumanoidRootPart.Position).Magnitude
            local health = murderer.Character:FindFirstChild("Humanoid") and math.floor(murderer.Character.Humanoid.Health) or 100
            
            infoLabel.Text = string.format("ðŸ“ %.0fm  â€¢  â¤ï¸ %d/100", dist, health)
            billboard.Enabled = dist <= Settings.ESP.MaxDistance
            highlight.Enabled = dist <= Settings.ESP.MaxDistance
        end)
        
        ESPCache["Murderer"] = {
            Billboard = billboard,
            Highlight = highlight,
            Connection = updateConn
        }
    end
    
    -- ESP SHERIFF
    local sheriff = getSheriff()
    if sheriff and sheriff ~= localPlayer and sheriff.Character and sheriff.Character:FindFirstChild("HumanoidRootPart") then
        local billboard = Instance.new("BillboardGui")
        billboard.Name = "SheriffESP"
        billboard.Size = UDim2.new(0, 200, 0, 80)
        billboard.AlwaysOnTop = true
        billboard.MaxDistance = Settings.ESP.MaxDistance
        billboard.StudsOffset = Vector3.new(0, 3.5, 0)
        billboard.Adornee = sheriff.Character.HumanoidRootPart
        billboard.Parent = game:GetService("CoreGui")
        
        local bg = Instance.new("Frame")
        bg.Size = UDim2.new(1, 0, 1, 0)
        bg.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
        bg.BackgroundTransparency = 0.2
        bg.BorderSizePixel = 0
        bg.Parent = billboard
        
        local bgCorner = Instance.new("UICorner")
        bgCorner.CornerRadius = UDim.new(0, 6)
        bgCorner.Parent = bg
        
        local topLine = Instance.new("Frame")
        topLine.Size = UDim2.new(1, 0, 0, 3)
        topLine.BackgroundColor3 = Settings.ESP.Colors.Sheriff
        topLine.BorderSizePixel = 0
        topLine.Parent = billboard
        
        local icon = Instance.new("TextLabel")
        icon.Text = "ðŸ”«"
        icon.Size = UDim2.new(0, 30, 0, 30)
        icon.Position = UDim2.new(0, 5, 0, 8)
        icon.BackgroundTransparency = 1
        icon.TextColor3 = Settings.ESP.Colors.Sheriff
        icon.Font = Enum.Font.GothamBold
        icon.TextSize = 22
        icon.Parent = billboard
        
        local nameLabel = Instance.new("TextLabel")
        nameLabel.Size = UDim2.new(1, -40, 0, 20)
        nameLabel.Position = UDim2.new(0, 40, 0, 8)
        nameLabel.BackgroundTransparency = 1
        nameLabel.Text = "SHERIFF"
        nameLabel.TextColor3 = Settings.ESP.Colors.Sheriff
        nameLabel.Font = Enum.Font.GothamBold
        nameLabel.TextSize = 16
        nameLabel.TextXAlignment = Enum.TextXAlignment.Left
        nameLabel.Parent = billboard
        
        local playerName = Instance.new("TextLabel")
        playerName.Size = UDim2.new(1, -40, 0, 18)
        playerName.Position = UDim2.new(0, 40, 0, 28)
        playerName.BackgroundTransparency = 1
        playerName.Text = sheriff.Name
        playerName.TextColor3 = Color3.fromRGB(255, 255, 255)
        playerName.Font = Enum.Font.Gotham
        playerName.TextSize = 14
        playerName.TextXAlignment = Enum.TextXAlignment.Left
        playerName.Parent = billboard
        
        local infoLabel = Instance.new("TextLabel")
        infoLabel.Size = UDim2.new(1, -10, 0, 18)
        infoLabel.Position = UDim2.new(0, 5, 0, 52)
        infoLabel.BackgroundTransparency = 1
        infoLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
        infoLabel.Font = Enum.Font.Gotham
        infoLabel.TextSize = 12
        infoLabel.TextXAlignment = Enum.TextXAlignment.Left
        infoLabel.Parent = billboard
        
        local highlight = Instance.new("Highlight")
        highlight.Name = "SheriffHighlight"
        highlight.Adornee = sheriff.Character
        highlight.FillColor = Settings.ESP.Colors.Sheriff
        highlight.FillTransparency = 0.7
        highlight.OutlineColor = Settings.ESP.Colors.Sheriff
        highlight.OutlineTransparency = 0.3
        highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
        highlight.Parent = game:GetService("CoreGui")
        
        local updateConn = RS.RenderStepped:Connect(function()
            if not sheriff.Character or not sheriff.Character:FindFirstChild("HumanoidRootPart") or
               not localPlayer.Character or not localPlayer.Character:FindFirstChild("HumanoidRootPart") then
                return
            end
            
            local dist = (sheriff.Character.HumanoidRootPart.Position - localPlayer.Character.HumanoidRootPart.Position).Magnitude
            local health = sheriff.Character:FindFirstChild("Humanoid") and math.floor(sheriff.Character.Humanoid.Health) or 100
            
            infoLabel.Text = string.format("ðŸ“ %.0fm  â€¢  â¤ï¸ %d/100", dist, health)
            billboard.Enabled = dist <= Settings.ESP.MaxDistance
            highlight.Enabled = dist <= Settings.ESP.MaxDistance
        end)
        
        ESPCache["Sheriff"] = {
            Billboard = billboard,
            Highlight = highlight,
            Connection = updateConn
        }
    end
    
    -- ESP GUN DROP
    for _, obj in pairs(Workspace:GetDescendants()) do
        if obj.Name == "GunDrop" and obj:IsA("BasePart") then
            local gunBillboard = Instance.new("BillboardGui")
            gunBillboard.Name = "GunDropESP"
            gunBillboard.Size = UDim2.new(0, 180, 0, 45)
            gunBillboard.AlwaysOnTop = true
            gunBillboard.MaxDistance = 500
            gunBillboard.StudsOffset = Vector3.new(0, 2, 0)
            gunBillboard.Adornee = obj
            gunBillboard.Parent = game:GetService("CoreGui")
            
            local bg = Instance.new("Frame")
            bg.Size = UDim2.new(1, 0
